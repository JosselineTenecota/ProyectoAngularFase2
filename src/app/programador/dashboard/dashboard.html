<div class="dash-wrapper">
  <header class="dash-header flex justify-between items-center">
    <div>
      <h1>Panel de Programador</h1>
      <p *ngIf="currentUser">
        Bienvenido, <span style="color: #42a5f5;">{{ currentUser.nombre }}</span> ({{ currentUser.cedula }})
      </p>
    </div>
    <div class="bg-gray-900 px-4 py-2 rounded-lg border border-gray-800">
      <span class="text-xs uppercase tracking-widest text-gray-500">Estado:</span>
      <span class="ml-2 text-green-500 font-mono text-sm">PostgreSQL Online</span>
    </div>
  </header>

  <div class="dash-grid">
    <section class="form-card">
      <h2>ğŸ“ Nuevo Proyecto</h2>

      <form (ngSubmit)="addProject()" #projectForm="ngForm">
        <div class="form-group">
          <label>TÃ­tulo del Proyecto *</label>
          <input type="text" name="titulo" [(ngModel)]="newProject.titulo" required
            class="input-dark" [class.invalid-border]="projectForm.submitted && !newProject.titulo"
            placeholder="Ej: E-commerce API">
        </div>

        <div class="form-group">
          <label>DescripciÃ³n *</label>
          <textarea name="descripcion" [(ngModel)]="newProject.descripcion" required rows="3"
            class="input-dark" placeholder="Â¿QuÃ© hiciste en este proyecto?"></textarea>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>CategorÃ­a</label>
            <select name="tipo" [(ngModel)]="newProject.tipo" class="input-dark">
              <option value="Academico">AcadÃ©mico</option>
              <option value="Laboral">Laboral</option>
            </select>
          </div>
          <div class="form-group">
            <label>Rol</label>
            <select name="participacion" [(ngModel)]="newProject.participacion" class="input-dark">
              <option value="Frontend">Frontend</option>
              <option value="Backend">Backend</option>
              <option value="Fullstack">Fullstack</option>
            </select>
          </div>
        </div>

        <div class="form-group">
          <label>Stack TecnolÃ³gico</label>
          <input type="text" name="tecnologias" [(ngModel)]="newProject.tecnologias"
            class="input-dark" placeholder="Angular, Java, PostgreSQL...">
        </div>

        <div class="form-row">
          <div class="form-group">
            <input type="url" name="urlRepo" [(ngModel)]="newProject.urlRepo"
              class="input-dark" style="font-size: 0.8rem;" placeholder="Link GitHub">
          </div>
          <div class="form-group">
            <input type="url" name="urlDeploy" [(ngModel)]="newProject.urlDeploy"
              class="input-dark" style="font-size: 0.8rem;" placeholder="Link Demo">
          </div>
        </div>

        <button type="submit" [disabled]="!projectForm.valid" class="btn-submit">
          Guardar Proyecto en BD
        </button>
      </form>
    </section>

    <section class="projects-list">
      
      <div class="mb-10">
        <h2 style="color: #ab47bc;">ğŸ“ Proyectos AcadÃ©micos</h2>
        <div *ngFor="let p of academicos$ | async" class="project-card">
          <div class="card-header">
            <h3>{{ p.titulo }}</h3>
            <button (click)="deleteProject($any(p).codigo)" class="btn-delete">ğŸ—‘</button>
          </div>
          <p class="tech">{{ p.tecnologias }}</p>
          <p class="desc">{{ p.descripcion }}</p>
          <div class="links">
            <a *ngIf="p.urlRepo" [href]="p.urlRepo" target="_blank">Repo â†—</a>
            <a *ngIf="p.urlDeploy" [href]="p.urlDeploy" target="_blank">Demo â†—</a>
          </div>
        </div>
        <p *ngIf="!(academicos$ | async)?.length" class="text-gray-600 italic">No hay proyectos acadÃ©micos.</p>
      </div>

      <div>
        <h2 style="color: #66bb6a;">ğŸ’¼ Experiencia Laboral</h2>
        <div *ngFor="let p of laborales$ | async" class="project-card" style="border-left-color: #66bb6a;">
          <div class="card-header">
            <h3>{{ p.titulo }}</h3>
            <button (click)="deleteProject($any(p).codigo)" class="btn-delete">ğŸ—‘</button>
          </div>
          <p class="tech">{{ p.tecnologias }}</p>
          <p class="desc">{{ p.descripcion }}</p>
        </div>
        <p *ngIf="!(laborales$ | async)?.length" class="text-gray-600 italic">No hay experiencia registrada.</p>
      </div>
    </section>
  </div>

  <footer class="mt-12 border-t border-gray-800 pt-8">
    <h2 style="color: #ffb300; font-size: 1.6rem; margin-bottom: 20px;">ğŸ“© Solicitudes de AsesorÃ­a</h2>
    <div class="appointments-grid">
      <div *ngIf="(asesorias$ | async) as solicitudes; else loading">
        <p *ngIf="solicitudes.length === 0" class="text-gray-600 italic">No hay solicitudes pendientes.</p>
        <div *ngFor="let a of solicitudes" class="appt-card pendiente">
          </div>
      </div>
      <ng-template #loading><p>Cargando asesorÃ­as...</p></ng-template>
    </div>
  </footer>
</div>